---
// @ts-ignore
import { Icon } from "astro-icon";
import Link from "@components/ui/link.astro";
import { Picture } from "@astrojs/image/components";

import Mos1 from '../assets/snacks/events/mos-1.webp';
import Weddings1 from '../assets/snacks/weddings/weddings-1.webp';
import Weddings2 from '../assets/snacks/weddings/weddings-2.webp';

const services = [
  {
    title: "Brookes @ Mo's Clubhouse",
    category: "Event Photography",
    imgsrc: Mos1,
    imgalt: "Gold Coast event photography.",
    
    style: "outline",
    btntxt: "More photos",
    
    btnlink: "/events",
  },
  {
    title: "June @ Mo's Clubhouse",
    category: "Event Photography",
    imgsrc: Weddings1,
    imgalt: "Gold Coast event photography.",
    
    style: "outline",
    btntxt: "More photos",
    
    btnlink: "/events",
  },
  {
    title: "June @ Mo's Clubhouse",
    category: "Event Photography",
    imgsrc: Weddings2,
    imgalt: "Gold Coast event photography.",
    
    style: "outline",
    btntxt: "More photos",
    
    btnlink: "/events",
  },
];
---

<!-- Flickity -->
<!-- CSS -->
<link rel="stylesheet" href="../flickity/flickity.min.css">
<!-- JS -->
<script src="../flickity/flickity.pkgd.min.js"></script>

<!-- Flickity Custom Styles -->
<style>

  .carousel-cell {
    margin: 40px 20px;
    min-height: 450px;
  }

  /* Start Flickity viewport safeguards V3 */
  main { max-width: 100%; }
  .flickity-viewport { min-height: fit-content ; }
  .blog-carousel, .flickity-viewport { max-width: 100vw !important; margin: 0 auto; min-height: 500px; }
  /* End Flickity viewport safeguards V3 */
  .services-carousel { margin: 20px auto; }


  /* Glass-card effect dial in, minimal */
  #glass-card {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(30px);
    border: 2px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transition-duration: 200ms;
  }
  #glass-card:hover {
    box-shadow: 0 15px 20px #00000010, 0 15px 20px #00000010;
  }

  </style>

<main class="my-8 md:my-16">
<div class="mb-8">
  <h2 class="text-2xl md:text-3xl lg:text-5xl font-bold lg:tracking-tight">
    Our most popular services.
  </h2>
  <p class="text-sm lg:text-lg max-w-6xl mt-4 text-slate-600">
    We offer full-suite, design to deployment marketing management under our Moonshot plan, but we don't expect you to fall in love straight away. 
    Get to know our work and turn-around for deliverables + requests, we're sure you'll be asking for a key to the house in no time.
  </p>
</div>

<div id="sliderContainer" class="services-carousel h-fit pb-4">
  {
    services.map((item) => (
      <div id="glass-card" class="carousel-cell flex flex-col xl:flex-row justify-center md:items-center h-fit w-full md:w-1/2">
          <div id="imgContainer" class="w-full">
            <Picture
                  src={item.imgsrc}
                  sizes="(max-width: 1200px) 1200px, 900px, 600px"
                  widths={[600, 900, 1200]}
                  aspectRatio="5:3"
                  loading="eager"
                  background="#f2f2f200"
                  fit="cover"
                  position="center"
                  class="w-full"
                />
          </div>
          <div id="textContainer" class="absolute left-4 bottom-4 w-full px-2">
            <div class="flex gap-4 justify-center items-center">
              <span class="text-gray-700 mr-3 uppercase text-xs">{item.category}</span>
              <h3 id="imgTitle" class="font-semibold text-black text-xl md:text-2xl">{item.title}</h3>
              
              <div class="flex items-center mb-8">
                
                <div class="ml-auto">
                  <Link 
                    onClick="onClick()"
                    class=""
                    href={item.btnlink || "#"}
                    block
                    style={item.style ? "primary" : "outline"}>
                    {item.btntxt || "Get Started"}
                  </Link>
                </div>
              </div>
            </div>
          </div>
      </div>
    ))
  }
</div>
</main>

<script>
  // element argument can be a selector string
  //   for an individual element
  var flkty = new Flickity( '.services-carousel', {
  cellAlign: 'left',
  contain: true,
  imagesLoaded: true,  
  adaptiveHeight: true,
  });
</script>
